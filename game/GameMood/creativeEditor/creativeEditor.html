<!DOCTYPE html>
<html lang="it">
  <head>
    <title>The Bocchette 2 - Editor Mappe Creativa</title>
    <!-- START <meta> -->
    <meta charset="UTF-8" />
    <!-- END <meta> -->

    <!-- Content -->
    <script src="/cons/cons.js"></script>
    <script src="/game/GameMood/tecnic.js"></script>
  </head>
  <body style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande','Lucida Sans', Arial, sans-serif; background-color: #195e79ad; cursor: default; overflow: hidden;">

    <div name="Scegli Squad" id="SSQ" hidden>
      <div style="display: flex; justify-content: center; align-items: center;">
        <div style="position: absolute; width: 250px; height: 80px; background: white; border: solid 1.5px; display: flex; flex-wrap: wrap; justify-content: center; align-content: center; flex-direction: column; top: 0px;  z-index: 1;">
          <hx>Scegli la squadra</hx>
          <input type="number" max="100" min="1" value="1">
          <div style="display: flex; justify-content: space-between;">
            <button onclick="SSQ(0, 1)">Chiudi</button>
            <button onclick="SSQ(0, /**/);">Applica</button>
          </div> 
        </div>
      </div>
    </div>
    
    <div style="overflow-y: auto; height: 40em;">
      <div name="Terreno" style="width: 950px; height: 700px; background-color: darkkhaki;">

        <div name="ombra ogg" style="opacity: 0.55; mix-blend-mode: darken; cursor: default; position: relative; width: fit-content;height: 100px; direction: rtl; display: none; align-items: end;" id="SQOggContainer" hidden>
          <img src="" alt="Err" id="SQOgg" style="margin-top: -50%; margin-left: -60%;">
        </div>
    
        <div name="Player" style="margin-top: 15px; top: 30px; margin-left: 40px; position: relative; width: fit-content;" id="player">
          <div id="fumetto" aria-label="tasto E" style="margin-left: 30px; position: absolute; margin-top: -25px;">-</div>
          <progress style="margin-top: -25px; position: absolute; z-index: 1; width: 65px; accent-color: green;" value="100" max="100"></progress>
          <progress value="0" max="99" style="margin-top: -15px; position: absolute; z-index: 1; width: 65px;" id="YourE"></progress>
          <img src="" style="/*position: absolute;*/ top: 50%; left: 50%;" alt="Player">
          <div name="mire" id="mire" hidden>
            <div name="miraE" style="background-color: #d6d6d6cc; width: 150px; height: 30px; rotate: 43deg; transform-origin: left; margin-top: -30px;margin-left: 20px;" id="miraE"></div>
            <div name="miraF" style="" id="miraF"></div>
          </div>
        </div>

        <div name="Bot1" style="margin-top: 50px; margin-left: 150px; position: relative;" id="bot1" hidden>
          <progress style="margin-top: -15px; position: absolute; z-index: 1; width: 65px; accent-color: green;" value="100" max="100" id="vita_bot1"></progress>
          <img src="#" style="/*position: absolute;*/ top: 50%; left: 50%;" alt="Bot1">
        </div>
  
        <div name="power-up" id="PwUP" style="background-image: url(https://docs.google.com/drawings/d/e/2PACX-1vRBSajVjm8pCR-tiwKCiXW0tp3x6O8L2jJYRIQb2WGZNrHP_njlpTcTtJBaZOlqAKBCaKV-h5UQhmHl/pub?w=960&h=720); width: 60px; height: 60px; background-size: cover; image-rendering: -webkit-optimize-contrast; position: relative; top: 82px; left: 230px;">
          <progress style="margin-left: 7px; margin-top: 5px; position: relative; z-index: 1; width: 65px; accent-color: green; opacity: 35%;" value="100" max="100"></progress>
        </div>

        <div name="tecnic">
          <div id="taglio_netto" style="background: url(https://docs.google.com/drawings/d/e/2PACX-1vRmI7KjnDx_uvg6KZyxEibN-523LxExHFJ-tPGdGg-KVp83nCCEUfkWl6u198uH4FkrtNvzFcaWX_Ld/pub?w=138&h=55); width: 60px; height: 25px; background-size: cover;"></div>
          <div id="super_taglio_netto" style="background: url(https://docs.google.com/drawings/d/e/1PACX-1vS56IefkAfoPXXixzVmuaW2BwvHc2Q5kbvsaAg9ce7hzz3ZRnDJDiLXOgpdSBHWIrPQO8xTdbkLPqP1/pub?w=276&h=111); width: 60px; height: 25px; background-size: cover;"></div>
        </div>

        <div name="muri" style="position: relative; top: 40px;">
          <div name="Muro Legno">
            <progress style="margin-left: 15px; position: absolute; z-index: 1; width: 65px; accent-color: green; opacity: 35%;" value="100" max="100"></progress>
            <div style="background: url(https://docs.google.com/drawings/d/e/2PACX-1vS5lScyKu8xDfCnODUQAqZbKWmRAeQIz8nFCGbugMOz3YK86MgBUlp_nFHNIUeTo7OfFoEewj9YpzRv/pub?w=327&h=62); background-size: inherit; height: 61px;width: 327px; zoom: 29.2%;" alt="Muro Legno" style="width: 10%;"></div>
          </div>
          <div name="Muro Pietra">
            <progress style="margin-left: 15px; position: absolute; z-index: 1; width: 65px; accent-color: green; opacity: 35%;" value="100" max="100"></progress>
            <div style="background: url(https://docs.google.com/drawings/d/e/2PACX-1vRQTsUFRGEvbQRp90UATKh2_4tZsg9UeG4MEnTTq2eIyhnX4EWPAFxRC4Cg-0-h5pnpIbX-MvsAjlj6/pub?w=327&h=62); background-size: inherit; height: 61px;width: 327px; zoom: 29.2%;" alt="Muro Legno" style="width: 10%;"></div>
          </div>
        </div>

      </div>
    </div>

    <div name="interface" style="position: absolute; z-index: 2; top: 0px; left: 0px;">
      <div name="Creativa" id="creativ" style="width: 1535px; height: 677px; background: royalblue; position: absolute; top: 1px; left: 0px;" hidden>
        <button style="background: indianred; border: solid 3px darkred; font: message-box; margin-left: 90%; margin-bottom: 5px;" onclick="WinEdit(0)">X</button>
        <div style="display: flex; justify-content: space-evenly;">
          <button>Impostazioni mappa</button>
          <button style="border: solid darkblue;">Finestra modifiche</button>
        </div>
        <div name="categor" style="display: flex; justify-content: space-evenly; margin-block: 7px;">
          <button onclick="SQC(1)">Strutture Prefabbricate</button>
          <button style="border: solid darkblue;" onclick="SQC(2)">Blocchi da costruzione</button>
          <button onclick="SQC(3)">Dispositivi</button>
          <button onclick="SQC(4)">Armi</button>
          <button onclick="SQC(5)">Consumabili</button>
        </div>
        <div style="display: flex; flex-direction: row; width: max-content; height: 87%; margin-inline: 7px;">
          <div name="Block da costr" id="BlkCost">
            <button title="Pietra ruvida" style="width: 100px; height: 100px; padding: 1px; display: flex; justify-content: flex-end; align-items: flex-start;" onclick="SQOgg('PietRuv')"><img src="https://docs.google.com/drawings/d/e/2PACX-1vQWjpgoDtgc_wKaOhOq2GgOm_-XqSNS8zmkPvkqwku38r5Fh3spTChn_bS4wRnDHdPdzMz_4P2Kt0BI/pub?w=100&h=100" alt="Err"></button>
          </div>
          <div name="Dispositiv" id="disp" style="display: flex; display: none;">
            <button title="Punto di nascita" style="width: 100px; height: 100px; padding: 1px; display: flex; justify-content: flex-end; align-items: flex-start;" onclick="SQOgg('PuntNasc')">
              <img src="https://docs.google.com/drawings/d/e/2PACX-1vQVgZLcAvOwpSWroShVq4h4TXiMHClF4O2Ozi0RKN7iEX3gL6uyaRlak7g3mB3hQydeutVSviAQ6d-O/pub?w=100&h=100" alt="Err">
            </button>
            
            <button title="Generatore armi" style="width: 100px; height: 100px; padding: 1px; display: flex; justify-content: flex-end; align-items: flex-start;" onclick="SQOgg('GenerArm')">
              <img src="https://docs.google.com/drawings/d/e/2PACX-1vQQzkHNEz2ZFwgVNbN961omGj4RtpLOLZK7iJyqMRz04jeA4sCZCqdWGOfv0eWnwW63ZBzc5tqiZiVK/pub?w=100&h=100" alt="Err">
            </button>

            <button title="Cassa Power-Up" style="width: 100px; height: 100px; padding: 1px; display: flex; justify-content: center; align-items: center;" onclick="SQOgg('PwUP')">
              <img src="https://docs.google.com/drawings/d/e/2PACX-1vRNVrloir3Rv_esBl_LuRsDqpRbTtQAtGBbo32vwz1JkJ0lBjRpYu5zyOW6GafN8-qyLcNKrjESQABO/pub?w=50&h=50" alt="Err">
            </button>

            <button title="Generatore di Bot" style="width: 100px; height: 100px; padding: 1px; display: flex; justify-content: flex-end; align-items: flex-start;" onclick="SQOgg('GenerBot')">
              <img src="https://docs.google.com/drawings/d/e/2PACX-1vRrglwOCqyf7UnmjWcRbAd0Nd91t-xA74tfj70DbTPdLRF1-4EXpKdW-aV0HRnb9UXApYRibHdkP4KQ/pub?w=100&h=100" alt="Err">
            </button>
          </div>
        </div>
      </div>
      <div name="Imp_Mappa"></div>
    </div>

    <div style="width: 220px; background: #ffffff; z-index: 4; position: absolute; margin-bottom: 1.5%; height: 95%; top: 8px;" hidden id="menu">
      <span style="font-size: xx-large; text-align: center; display: flex; justify-content: center;">EDITOR CREATIVA</span>
      <div style="display: flex; flex-direction: column; flex-wrap: nowrap; align-items: stretch; margin-inline: 5px; margin-top: 15%;">
        <button style="background: lightgray; border: solid 3px gray" onclick="OSett()">Impostazioni</button>
        <button style="background: lightgray; border: solid 3px gray" onclick="WinEdit(1)">Modifica mappa</button>
        <button style="background: lightgray; border: solid 3px gray" onclick="SSQ(1)">Seleziona squadra</button>
        <button style="background: lightgreen; border: solid forestgreen" onclick="">AVVIA</button>
        <button style="background: indianred; border: solid 3px darkred" onclick="let exit=window.confirm('Sei sicuro di voler uscire?');if(exit == true){window.location.href = '/game/GameMood/creativ.html';}">ESCI</button>
      </div>
    </div>

    <div style="position: absolute; z-index: 1; margin-top: 6%; top: 8px;">
      <div style="position: absolute; z-index: 3;" id="MinImpo" hidden>
        <div style="padding-left: 95.5%; margin-left: 70%; background: white; ">
          <button style="background: indianred; border: solid 3px darkred; font: message-box;" onclick="CSett()">X</button>
        </div>
        <iframe src="/game/impo.html" frameborder="1.5" style="width: 600px; height: 400px; margin-left: 70%"></iframe>
      </div>
    </div>

    <div style="margin-top: 1.2%; height: 20px; width: 99.5%; background-color: #4343db; border: darkblue solid 5.5px; color: white; cursor: default;">
      <strong>[Esc] Menù </strong>
      <!-- <strong>[Esc] Chiudi finestra modifiche</strong> -->
    </div>
  </body>
</html>

<script> //Seleziona un'oggetto dalla creativa, lo porta in mappa e fà anim mouse
  function SQOgg(nm) {
    const SQOggContainer = document.getElementById('SQOggContainer');
    const SQOggImage = document.getElementById('SQOgg');

    switch (nm) {
      case 'PietRuv':
        WinEdit(0);
        SQOggImage.src = 'https://docs.google.com/drawings/d/e/2PACX-1vQWjpgoDtgc_wKaOhOq2GgOm_-XqSNS8zmkPvkqwku38r5Fh3spTChn_bS4wRnDHdPdzMz_4P2Kt0BI/pub?w=100&h=100';
      break;
      case 'PuntNasc':
        WinEdit(0);
        SQOggImage.src = 'https://docs.google.com/drawings/d/e/2PACX-1vQVgZLcAvOwpSWroShVq4h4TXiMHClF4O2Ozi0RKN7iEX3gL6uyaRlak7g3mB3hQydeutVSviAQ6d-O/pub?w=100&h=100';
      break;
      case 'GenerArm':
        WinEdit(0);
        SQOggImage.src = 'https://docs.google.com/drawings/d/e/2PACX-1vQQzkHNEz2ZFwgVNbN961omGj4RtpLOLZK7iJyqMRz04jeA4sCZCqdWGOfv0eWnwW63ZBzc5tqiZiVK/pub?w=100&h=100';
      break;
      case 'PwUP':
        WinEdit(0);
        SQOggImage.src = 'https://docs.google.com/drawings/d/e/2PACX-1vRNVrloir3Rv_esBl_LuRsDqpRbTtQAtGBbo32vwz1JkJ0lBjRpYu5zyOW6GafN8-qyLcNKrjESQABO/pub?w=50&h=50';
      break;
      case 'GenerBot':
        WinEdit(0);
        SQOggImage.src = 'https://docs.google.com/drawings/d/e/2PACX-1vRrglwOCqyf7UnmjWcRbAd0Nd91t-xA74tfj70DbTPdLRF1-4EXpKdW-aV0HRnb9UXApYRibHdkP4KQ/pub?w=100&h=100';
      break;
    }

    SQOggContainer.style.display = 'inline-grid';

    // Seguire il mouse e animazione del mouse
    document.addEventListener('mousemove', function (event) {
      if (!event.buttons) {
        var mouseX = event.clientX;
        var mouseY = event.clientY;

        SQOggContainer.style.left = mouseX + 'px';
        SQOggContainer.style.top = mouseY + 'px';
      }
    });

    document.addEventListener('mousedown', function (event) {
      if (event.button === 0) {
        SQOggContainer.style.cursor = 'grab';

        setTimeout(function () {
          SQOggContainer.style.cursor = 'default';
        }, 500);
      }
    });
  }
</script>

<script> //Cambia contenuto delle categorie di creativa
  const BlkCost = document.getElementById('BlkCost');
  const disp = document.getElementById('disp');
  function SQC(n) {
    switch(n) {
      case 1:
        BlkCost.style.display = 'none';
        disp.style.display = 'none';
      break;
      case 2:
        BlkCost.style.display = 'flex';
        disp.style.display = 'none';
      break;
      case 3:
        BlkCost.style.display = 'none';
        disp.style.display = 'flex';
      break;
      case 4:
        BlkCost.style.display = 'none';
        disp.style.display = 'none';
      break;
      case 5:
        BlkCost.style.display = 'none';
        disp.style.display = 'none';
      break;
    }
  }
</script>

<script>// Gestisce il menù di scelta squadra
  function SSQ(n, sq) {
    let SSQ = document.getElementById('SSQ');
    if (n === 1 || n === '1') {
      SSQ.hidden = false;
    } 
    else {
      SSQ.hidden = true;
    }

    switch(sq) {
      case 1:
        //
      break;
    }
  }
</script>

<!-- INIZIO cose Player -->
  <script src="/game/GameMood/creativeEditor/cosePlayer.js"></script> 

  <style>
    #fumetto {
      font-family: sans-serif;
      position: relative;
      display: inline-block;
      border-bottom: 1px dotted black;
    }

    #fumetto:hover::before {
      content: "";
      position: absolute;
      border-style: solid;
      border-width: 10px 10px 0 10px;
      border-color: #333 transparent transparent transparent;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
    }

    #fumetto:hover::after {
      content: attr(aria-label);
      position: absolute;
      background-color: #333;
      color: #fff;
      padding: 5px;
      border-radius: 5px;
      font-size: 14px;
      font-weight: bold;
      white-space: nowrap;
      bottom: 120%;
      left: 50%;
      transform: translateX(-50%);
    }
  </style>
<!-- FINE cose Player -->

<script> //Apre menù creativa
  function WinEdit(n){
    const creativ = document.getElementById('creativ');
    if (n === 1) {
      creativ.hidden = false;
    } 
    if (n === 0) {
      creativ.hidden = true;
    }
  }
</script>

<script> //Apri <iframe> impostazioni
  function OSett() {
    const MinImpo = document.getElementById("MinImpo");
    MinImpo.style.display = "block";
  }

  function CSett() {
    const MinImpo = document.getElementById("MinImpo");
    MinImpo.style.display = "none";
  }
</script>

<script> // apri/chiudi menù
  document.addEventListener('keydown', function (event) {
    if (event.key === 'Escape') {
      const menuDiv = document.getElementById('menu');
      if (menuDiv.hasAttribute('hidden')) {
        menuDiv.removeAttribute('hidden');
      } else {
        menuDiv.setAttribute('hidden', true);
      }
    }
  });
</script>