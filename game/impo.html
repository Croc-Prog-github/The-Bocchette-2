<!DOCTYPE html>
<html>
  <head>
    <title>Impostazioni</title>
    <!-- START <meta> -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- END <meta> -->

    <!-- Content -->
    <link rel="icon" href="https://docs.google.com/drawings/d/e/2PACX-1vRzg3r27e7_yLyB4m8rlyFHgQ8H5d6IJtW39axawbD5u7S_eX3ezqZdtll3NBLxJYY_OUhuSGJ-jQ8T/pub?w=16&h=16" type="image/x-icon">
    <script src="/cons/console.js"></script>
    <script src="/SchedDes.js"></script>
  </head>
  <body style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif; background-color: #316f87; overflow: hidden;">

    <div style="width: 100%; height: 50px; background: black; padding-left: 16px; margin-left: -8px; margin-top: -8px; display: flex; flex-direction: row;justify-content: flex-start; align-items: center;">
      <a href="/game/home.html" style="text-decoration: none; font-size: 25px; border: solid 2px black;" title="Indietro" hidden>⬅️</a>
      <span style="font-size: xx-large; margin-left: 15px; color: white; margin-right: 3vw; cursor: default;">Impostazioni</span>

      <svg height="24" viewBox="0 -960 960 960" width="24" fill="white" onclick="Acess()" style="margin-right: 35px; background: rgb(95, 95, 95); border-radius: 5px;">
        <path d="M480-720q-33 0-56.5-23.5T400-800q0-33 23.5-56.5T480-880q33 0 56.5 23.5T560-800q0 33-23.5 56.5T480-720ZM360-80v-520q-60-5-122-15t-118-25l20-80q78 21 166 30.5t174 9.5q86 0 174-9.5T820-720l20 80q-56 15-118 25t-122 15v520h-80v-240h-80v240h-80Z"/>
      </svg>

      <svg height="24" viewBox="0 -960 960 960" width="24" fill="white" onclick="Video()" style="margin-right: 35px; background: rgb(95, 95, 95); border-radius: 5px;">
        <path d="M300-360h60v-160h-60v50h-60v60h60v50Zm100-50h320v-60H400v60Zm200-110h60v-50h60v-60h-60v-50h-60v160Zm-360-50h320v-60H240v60Zm80 450v-80H160q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200H640v80H320ZM160-280h640v-480H160v480Zm0 0v-480 480Z"/>
      </svg>

      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="white" onclick="ImpSit()" style="margin-right: 35px; background: rgb(95, 95, 95); border-radius: 5px;">
        <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm112-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z"/>
      </svg>

      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="white" onclick="Tast()" style="margin-right: 35px; background: rgb(95, 95, 95); border-radius: 5px;">
        <path d="M160-200q-33 0-56.5-23.5T80-280v-400q0-33 23.5-56.5T160-760h640q33 0 56.5 23.5T880-680v400q0 33-23.5 56.5T800-200H160Zm0-80h640v-400H160v400Zm160-40h320v-80H320v80ZM200-440h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80ZM200-560h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80Zm120 0h80v-80h-80v80ZM160-280v-400 400Z"/>
      </svg>

    </div>

    <div name="Impost.HTML" style="cursor: default;">

      <div style="margin-top: 20px;" name="Accesibilità" id="acces">
        <h2>Accesibilità</h2>

        <hx>Dimensione caratteri (em)</hx> 
          <input type="number" style="width: 40px;" value="1" min="0.5" max="3" id="DCar"> 
        <var style="margin-left: 25px;">Descrizione</var>

        <p><strong>Sottotitoli</strong></p>

        <div style="display: flex; align-items: center;">
          <hx>Sottotitoli</hx> 
            <div class="switch">
              <input type="checkbox" id="switch-1" checked>
              <label for="switch-1"></label>
            </div> 
          <var style="margin-left: 15px;">Abilita i sottotitoli nei dialoghi</var>
        </div>

        <hx>Dimensione caratteri sottotitoli (em)</hx> 
          <input type="number" style="width: 40px;" value="1.5" min="0.5" max="3"> 
        <var style="margin-left: 25px;">Descrizione</var>
      </div>

      <div style="margin-top: 20px;" name="Video" id="vid" hidden>
        <h2>Impostazioni Grafiche</h2>

        <hx>Hz dello schermo: </hx> 
          <select>
            <option value="opzione1" >90 Hz</option>
            <option value="opzione2" selected>60 Hz</option>
            <option value="opzione3">30 Hz</option>
          </select>
        <var style="margin-left: 25px;">Descrizione</var>
        
        <p></p>

        <hx>Limite FPS: </hx> 
          <select>
            <option value="opzione1" >ILLIMITATI</option>
            <option value="opzione2">120 FPS</option>
            <option value="opzione3">90 FPS</option>
            <option value="opzione3" selected>60 FPS</option>
          </select>
        <var style="margin-left: 25px;">Descrizione</var>
        
        <p></p>

        <hx>Frame Generator</hx>
          <div class="switch">
            <input type="checkbox" id="switch-2">
            <label for="switch-2"></label>
          </div>
        <var style="margin-left: 25px;">Descrizione</var>
        
        <p></p>
        
        <hx>Grafica: </hx> 
          <select>
            <option value="opzione1">Estrema</option>
            <option value="opzione2">Sofisticata</option>
            <option value="opzione3" selected>Normale</option>
            <option value="opzione3">Bassa</option>
          </select>
        <var style="margin-left: 25px;">Descrizione</var>
        
        

        <h2>Aspetto e personalizzazione</h2>

        <hx>Tema:</hx> 
        <select>
          <option value="opzione1" selected>Default (azzurro, grigio, bianco)</option>
          <option value="opzione2">Buio (azzurro scuro, grigio scuro, grigio)</option>
          <option value="opzione3">Blu buio (blu chiaro, grigio scuro, grigio)</option>
        </select>



      </div>

      <div style="margin-top: 20px;" name="Impost.sito" id="impSit" hidden>
        <h2>Impostazioni Avanzate</h2>

        <label for="imageSetting">Immagini:</label>
        <select id="imageSetting" onchange="updateSetting('imageSetting')">
          <option value="allow">Consenti</option>
          <option value="block">Blocca</option>
        </select>
        <br>
        <label for="jsSetting">JavaScript:</label>
        <select id="jsSetting" onchange="updateSetting('jsSetting')">
          <option value="allow">Consenti</option>
          <option value="block">Blocca</option>
        </select>
        <br>
        <label for="audioSetting">Audio:</label>
        <select id="audioSetting" onchange="updateSetting('audioSetting')">
          <option value="allow">Consenti</option>
          <option value="block">Blocca</option>
        </select>

      </div>


      <div name="Imps.Tasti" id="impTast" hidden>
        <h2>Impostazioni Tastiera</h2>
        <div name="ESCI">
          <hx>Menù di gioco</hx>
          <select>
            <option value="esc" selected>Esc</option>
            <option value="ctrl">Ctrl</option>
            <option value="shift">Shift</option>
          </select>
        </div>
        <p></p>
        <div name="Movimento">
          <hx>Movimento Bocchetta</hx>
          <select>
            <option value="wasd">WASD</option>
            <option value="frec">IJKL</option>
          </select>
        </div>
        <p></p>
        <div name="Tecnic">
          <hx>Tasto per Slot tecnica 1</hx>
          <select>
            <option value="e">e</option>
            <option value="f">f</option>
          </select>
          <br>
          <hx>Tasto per Slot tecnica 2</hx>
          <select>
            <option value="f">f</option>
            <option value="e">e</option>
          </select>
        </div>
      </div>

    </div>

    <p></p>
    <button style="background: indianred; border: solid 3px darkred" onclick="let ReSet=window.confirm('Sei sicuro di voler tornare alle impostazioni predefinite?');">Reimpostazione predefinita</button>
    <button onclick="Aply2()">Applica</button>
    <hr>

  </body>
</html>

<script>
  function updateSetting(setting) {
    value = document.getElementById(setting).value;
    //document.getElementById(setting).value;
    switch (setting) {
      case 'imageSetting':
        if (value === 'allow') {
          const allowImages = document.getElementById("allowImages");
          allowImages.addEventListener("change", function() {
            const images = document.getElementsByTagName("img");
            for(let i=0; i<images.length; i++){
              images[i].style.display = this.checked ? "block" : "none";
            }
          });
        } else {
          let immagini = document.getElementsByTagName('img');
          for(let i = 0; i < immagini.length; i++) {
            immagini[i].style.visibility = "hidden";
          }
        }
      break;
      case 'jsSetting':
        if (value === 'allow') {
          document.querySelectorAll('script').forEach(e => e.removeAttribute('nonce'));
          alert(":)");
        } else {
          document.querySelectorAll('script').forEach(function(script) {
            script.disabled = true;
          });
          alert("!");
        }
      break;
      case 'audioSetting':
        if (value === 'allow') {
          // abilita l'audio
        } else {
          // disabilita l'audio
        }
      break;
    }
  }
</script>

<script>//Cambia schermata impostazioni
  let acces = document.getElementById("acces");
  let vid = document.getElementById("vid");
  let impSit = document.getElementById("impSit");
  let impTast = document.getElementById("impTast");
  function Acess() {
    vid.hidden = true;
    impSit.hidden = true;
    acces.hidden = false;
    impTast.hidden = true;
  }
  function Video() {
    vid.hidden = false;
    impSit.hidden = true;
    acces.hidden = true;
    impTast.hidden = true;
  }
  function ImpSit() {
    vid.hidden = true;
    impSit.hidden = false;
    acces.hidden = true;
    impTast.hidden = true;
  }
  function Tast() {
    vid.hidden = true;
    impSit.hidden = true;
    acces.hidden = true;
    impTast.hidden = false;
  }
</script>

<script> //Salvataggio in session storage
  
  //Quando entri nella pagina carichi i valori: storage --> variabili
  let DCar = sessionStorage.getItem("DCar"); //Dimensione caratteri
  let sott = sessionStorage.getItem("sott"); //Sottotitoli ON-OFF
  let DCarSott = sessionStorage.getItem("DCarSott"); //Dimensioni Caratteri Sottotitoli
  
  function Aply() { //Applica impo.
    //Carica: variab. --> sorage
    sessionStorage.setItem("DCar", DCar);
    sessionStorage.setItem("sott", sott);
    sessionStorage.setItem("DCarSott", DCarSott);
  } 
  setInterval(function() {
    Aply();
    const keysToCheck = ['obb', 'gett', 'soldi', 'passP', 'gemme']; // Array delle chiavi da verificare
    let resetValues = false;
    for (let key in sessionStorage) {
      if (keysToCheck.includes(key)) { // Verifica se la chiave corrente è presente nell'array keysToCheck
        let value = sessionStorage.getItem(key);
        if (isNaN(parseFloat(value))) {
          resetValues = true;
          console.error("La chiave: " + key + " aveva valore diverso da una variabile di tipo int o float.");
        }
      }
    }
    if (resetValues) {
      for (let key in sessionStorage) {
        sessionStorage.setItem(key, "0");
      }
      console.warn("I valori di tutte le chiavi sono impostati a 0.");
    }
  }, 100);
</script>

<script> //Aggiorna i valori interf. --> variabili
  function Aply2() {
    //Aggiorna Dimensione Caratt.
      const DCarElement = document.getElementById('DCar');
      const DCarValue = DCarElement.value;
      DCar = DCarValue
    //end

    //Aggiorna Sottotitoli

    //end
  }
</script>

<script> //Reimpostazione predefinita
  function reset() {

  }
</script>

<style>
  .switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 24px;
  margin: 0 10px;
  border-radius: 8px;
  overflow: hidden;
}

.switch input {
  display: none;
}

.switch label {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #ccc;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease-in-out;
}

.switch label:before {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  background-color: #fff;
  border-radius: 50%;
  transition: margin 0.3s ease-in-out;
}

.switch input:checked + label {
  background-color: #2196F3;
}

.switch input:checked + label:before {
  margin-left: 24px;
}

.switch label:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
}
</style>