<!DOCTYPE html>
<html lang="it">
  <head>
    <title>Gestione Dati - The Bocchette 2</title>
    <!-- START <meta> -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- END <meta> -->

    <!-- Content -->
  </head>
  <body style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande','Lucida Sans', Arial, sans-serif; background-color: #195e79ad; margin-left: 20px; cursor: default;">
    <div style="display: flex; flex-direction: row; justify-content: flex-start;">
      <a href="/game/home.html" style="text-decoration: none; font-size: 25px; border: solid 2px black;" title="Indietro">⬅️</a>
    </div>
    <h2 style="margin-block-start: 0.2em;">Gestione Dati</h2>
    
    <div style="margin-top: 0px;">
      <hx>Salva</hx>
      <li>
        <button disabled title="Questo è un account Ospite">Salva sul server</button> Server:
        <select>
          <option value="Express 1">Express.js - 1</option>
          <option value="Node 1" disabled>Node.js - 1</option>
        </select>
      </li>

      <li>
        <button style="background: dodgerblue; border-style: double; border-radius: 6px; color: white; cursor: pointer;">Salva sul tuo PC</button>
      </li>
    </div>

    <div style="margin-top: 20px;">
      <hx>Carica</hx>
      <li><button onclick="Load()" style="background: dodgerblue; border-style: double; border-radius: 6px; color: white; cursor: pointer;">Carica un salvataggio dal PC</button></li>
      <li><button disabled>Carica un salvataggio dal Server</button> Server:
        <select>
          <option value="Express 1">Express.js - 1</option>
          <option value="OneDrive" disabled>OneDrive</option>
        </select>
      </li> 
    </div>


  </body>
</html>

<script>
  function Load() {
    let sci = window.confirm('I dati che caricherai dal PC sostituiranno i progressi attuali; continuare?');
    if (sci == 'true') {

    }
  }
</script>

<script>
  function scar(text) {
    const encryptedText = btoa(text);
    const fileName = 'file.encrypt';

    const downloadLink = document.createElement('a');
    downloadLink.href = 'data:text/plain;charset=utf-8,' + encodeURIComponent(encryptedText);
    downloadLink.download = fileName;

    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
  }
</script>

<script>
  function decryptFile(file) {
    const reader = new FileReader();
    reader.onload = function(event) {
      const encryptedText = event.target.result;
      const decryptedText = atob(encryptedText);

      // Fai qualcosa con il testo decriptato
      console.log(decryptedText);
    };

    reader.readAsText(file);
  }

  function handleFileSelect(event) {
    const file = event.target.files[0];
    const fileName = file.name;
  
    if (!fileName.endsWith('.encrypt')) {
      alert('Si prega di selezionare un file .encrypt');
      return;
    }

    decryptFile(file);
  }

  const fileInput = document.querySelector('input[type="file"]');
  fileInput.addEventListener('change', handleFileSelect);
</script>