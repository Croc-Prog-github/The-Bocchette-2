{
  "version": 3,
  "sources": ["../src/loadenv.ts"],
  "sourcesContent": ["import fs from \"fs\";\nimport path from \"path\";\nimport dotenv from \"dotenv\";\n\nfunction getNodeEnv() {\n  return process.env.NODE_ENV || \"development\";\n}\n\nfunction getRegion() {\n  // EU, NA, AS, AF, AU, SA, UNKNOWN\n  return (process.env.REGION || \"unknown\").toLowerCase();\n}\n\nfunction loadEnvFile(envFileOptions: string[], log: 'none' | 'success' | 'both'  = 'none') {\n    const envPaths = [];\n    envFileOptions.forEach((envFilename) => {\n      envPaths.push(path.resolve(path.dirname(require?.main?.filename || process.cwd()), \"..\", envFilename));\n      envPaths.push(path.resolve(process.cwd(), envFilename));\n    });\n\n    // return the first .env path found\n    const envPath = envPaths.find((envPath) => fs.existsSync(envPath));\n\n    if (envPath) {\n        dotenv.config({ path: envPath });\n\n        if (log !== \"none\") {\n            console.info(`\u2705 ${path.basename(envPath)} loaded.`);\n        }\n\n    } else if (log === \"both\") {\n        console.info(`\u2139\uFE0F  optional .env file not found: ${envFileOptions.join(\", \")}`);\n    }\n}\n\n// load .env.cloud defined on admin panel\nif (process.env.COLYSEUS_CLOUD !== undefined) {\n    loadEnvFile([`.env.cloud`]);\n}\n\n// (overrides previous env configs)\nloadEnvFile([`.env.${getNodeEnv()}`, `.env`], 'both');\n\nif (process.env.REGION !== undefined) {\n  loadEnvFile([`.env.${getRegion()}.${getNodeEnv()}`], 'success');\n}"],
  "mappings": "AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AACjB,OAAO,YAAY;AAEnB,SAAS,aAAa;AACpB,SAAO,QAAQ,IAAI,YAAY;AACjC;AAEA,SAAS,YAAY;AAEnB,UAAQ,QAAQ,IAAI,UAAU,WAAW,YAAY;AACvD;AAEA,SAAS,YAAY,gBAA0B,MAAoC,QAAQ;AACvF,QAAM,WAAW,CAAC;AAClB,iBAAe,QAAQ,CAAC,gBAAgB;AACtC,aAAS,KAAK,KAAK,QAAQ,KAAK,QAAQ,SAAS,MAAM,YAAY,QAAQ,IAAI,CAAC,GAAG,MAAM,WAAW,CAAC;AACrG,aAAS,KAAK,KAAK,QAAQ,QAAQ,IAAI,GAAG,WAAW,CAAC;AAAA,EACxD,CAAC;AAGD,QAAM,UAAU,SAAS,KAAK,CAACA,aAAY,GAAG,WAAWA,QAAO,CAAC;AAEjE,MAAI,SAAS;AACT,WAAO,OAAO,EAAE,MAAM,QAAQ,CAAC;AAE/B,QAAI,QAAQ,QAAQ;AAChB,cAAQ,KAAK,UAAK,KAAK,SAAS,OAAO,WAAW;AAAA,IACtD;AAAA,EAEJ,WAAW,QAAQ,QAAQ;AACvB,YAAQ,KAAK,+CAAqC,eAAe,KAAK,IAAI,GAAG;AAAA,EACjF;AACJ;AAGA,IAAI,QAAQ,IAAI,mBAAmB,QAAW;AAC1C,cAAY,CAAC,YAAY,CAAC;AAC9B;AAGA,YAAY,CAAC,QAAQ,WAAW,KAAK,MAAM,GAAG,MAAM;AAEpD,IAAI,QAAQ,IAAI,WAAW,QAAW;AACpC,cAAY,CAAC,QAAQ,UAAU,KAAK,WAAW,GAAG,GAAG,SAAS;AAChE;",
  "names": ["envPath"]
}
