{"version":3,"file":"discord.mjs","sources":["../../../src/3rd_party/discord.ts"],"sourcesContent":["/**\n * Discord Embedded App SDK\n * https://github.com/colyseus/colyseus/issues/707\n *\n * All URLs must go through the local proxy from\n * https://<app_id>.discordsays.com/.proxy/<mapped_url>/...\n *\n * URL Mapping Examples:\n *\n * 1. Using Colyseus Cloud:\n *   - /colyseus/{subdomain} -> {subdomain}.colyseus.cloud\n *\n *   Example:\n *     const client = new Client(\"https://xxxx.colyseus.cloud\");\n *\n * -------------------------------------------------------------\n *\n * 2. Using `cloudflared` tunnel:\n *   - /colyseus/ -> <your-cloudflared-url>.trycloudflare.com\n *\n *   Example:\n *     const client = new Client(\"https://<your-cloudflared-url>.trycloudflare.com\");\n *\n * -------------------------------------------------------------\n *\n * 3. Providing a manual /.proxy/your-mapping:\n *   - /your-mapping/ -> your-endpoint.com\n *\n *   Example:\n *     const client = new Client(\"/.proxy/your-mapping\");\n *\n */\nexport function discordURLBuilder (url: URL): string {\n    const localHostname = window?.location?.hostname || \"localhost\";\n\n    const remoteHostnameSplitted = url.hostname.split('.');\n    const subdomain = (\n        !url.hostname.includes(\"trycloudflare.com\") && // ignore cloudflared subdomains\n        !url.hostname.includes(\"discordsays.com\") &&  // ignore discordsays.com subdomains\n        remoteHostnameSplitted.length > 2\n    )\n        ? `/${remoteHostnameSplitted[0]}`\n        : '';\n\n    return (url.pathname.startsWith(\"/.proxy\"))\n        ? `${url.protocol}//${localHostname}${subdomain}${url.pathname}${url.search}`\n        : `${url.protocol}//${localHostname}/.proxy/colyseus${subdomain}${url.pathname}${url.search}`;\n}\n"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BG;AACG,SAAU,iBAAiB,CAAE,GAAQ,EAAA;IACvC,MAAM,aAAa,GAAG,MAAM,EAAE,QAAQ,EAAE,QAAQ,IAAI,WAAW,CAAC;IAEhE,MAAM,sBAAsB,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACvD,IAAA,MAAM,SAAS,GAAG,CACd,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC;QAC3C,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,iBAAiB,CAAC;AACzC,QAAA,sBAAsB,CAAC,MAAM,GAAG,CAAC;AAEjC,UAAE,CAAI,CAAA,EAAA,sBAAsB,CAAC,CAAC,CAAC,CAAE,CAAA;UAC/B,EAAE,CAAC;IAET,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC;AACtC,UAAE,CAAG,EAAA,GAAG,CAAC,QAAQ,KAAK,aAAa,CAAA,EAAG,SAAS,CAAA,EAAG,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAE,CAAA;AAC7E,UAAE,CAAG,EAAA,GAAG,CAAC,QAAQ,CAAA,EAAA,EAAK,aAAa,CAAmB,gBAAA,EAAA,SAAS,CAAG,EAAA,GAAG,CAAC,QAAQ,CAAA,EAAG,GAAG,CAAC,MAAM,EAAE,CAAC;AACtG;;;;"}