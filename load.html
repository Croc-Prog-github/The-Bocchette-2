<!DOCTYPE html>
<html lang="it">
<head>
  <title>The Bocchette 2</title>
  <!-- START <meta> -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- END <meta> -->

  <!-- Content -->
  <script src="/cons/cons.js"></script>
  <link rel="stylesheet" href="/style.css">
  <script src="/var.js"></script>
</head>
<body id="body" style='font-family: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif; height: 100%; cursor: auto; overflow-y: hidden;'>
  <!-- Caricamento -->
  <hx id="title" style="display: flex; justify-content: center;" id="body">The bocchette 2</hx>

  <div style="display: grid; justify-content: center; height: 590px; align-content: center;">
    <div style="/* position: relative; *//* margin-top: 10%; *//* margin-left: 42%; */background: white; width: auto; height: auto; display: grid; justify-items: center;">
      <div style="display: none;">
        <x style="font-size: 20px;"><strong style="margin-inline: 83px;">Accedi</strong></x> <br> 
        <x style="font-size: small;">al tuo account The Bocchette</x><br>

        <div style="margin-top: 10px;">
          <x style="font-size: smaller;">Username</x>
          <input type="text" placeholder="E-mail, Username">
        </div>

        <div style="margin-top: 10px;">
          <x style="font-size: smaller;">Password</x>
          <input type="password" placeholder="Password">
        </div>
      </div>

      <div name="main" style="margin: 7px; text-align: center;" id="main">
        <div style="display: flex; flex-direction: column; align-items: center;">
          <x style="font-size: 20px; cursor: default;"><strong style="margin-inline: 83px;">Scegli un'opzione</strong></x>
        </div>
        <a onclick="AccountOsp()" style="color: -webkit-link; cursor: pointer;text-decoration: underline;">Usa account Ospite</a>
        |
        <input id="file-upload" type="file" accept=".encrypt" hidden>
        <label for="file-upload" style="color: -webkit-link; cursor: pointer;text-decoration: underline;">Carica dati</label>
        |
        <hx style="color: -webkit-link; cursor: pointer;text-decoration: underline;" onclick="AccServ('login');">Account server</hx>
      </div>

      <div name="loginDiv" style="margin: 7px; text-align: center; flex-direction: column; align-items: center;" id="login" hidden>
        <strong style="margin-inline: 83px; font-size: 20px; cursor: default;">Accedi</strong>
        <input type="text" placeholder="Username" maxlength="14">
        <br>
        <input type="password" minlength="8" placeholder="Password">
        <hx style="font-size: small; color: -webkit-link; cursor: pointer;text-decoration: underline;">Password dimenticata</hx>
        <br>
        <div style="display: flex; flex-direction: row;">
          <hx style="color: -webkit-link; cursor: pointer;text-decoration: underline;" title="Indietro" onclick="AccServ('main');"><---</hx>
          |
          <button>Accedi</button>
          |
          <hx style="color: -webkit-link; cursor: pointer;text-decoration: underline;">Registrati</hx>
        </div>
      </div>

      <div name="RegistratiDiv">
        
      </div>

    </div>
  </div>
  <progress value="100" max="100" id="load"></progress>
  <!--<progresBar max="100" value="0" color="green"></progresBar>-->

  <script src="/manut/manut.js"></script>
</body>
</html>

<script> //Mostra e gestisce il div per accesso dal server
  function AccServ(dest) {
    const mainDiv = document.getElementById("main");
    const loginDiv = document.getElementById("login");
    switch(dest) {
      case 'login':
        mainDiv.style.display = 'none';
        loginDiv.style.display = 'flex';
      break;
      case 'main':
        mainDiv.style.display = 'block';
        loginDiv.style.display = 'none';
      break;
    }
  }
</script>


<script>
  var myImage = document.getElementById("body");
  const progress = document.querySelector("#load");
  let login = document.getElementById("main");
  login.style.display = "none";
  myImage.style.cursor = "wait";

  // Imposta il valore iniziale del progress a 5
  progress.value = 5;

  // Incrementa il valore del progress di 5 ogni 0.5 secondi
  const intervalId = setInterval(() => {
    progress.value += 5;
    // Ferma l'intervallo quando il valore del progress raggiunge il 100%
    if (progress.value == 100) {
      clearInterval(intervalId);
      login.style.display = "block";
      myImage.style.cursor = "default";
      //window.location.href = "/game/home.html";
      if (manut == 1) {
        window.location.href = "/manut/manut.html";
      }
    }
  }, 200);
</script>

<script>
  let username;
  function AccountOsp() {
    username = window.prompt('Inserisci il tuo Username');
    if (username != "null") {
      if (username.length <= 14) {
        localStorage.setItem("username", username);
        username = localStorage.getItem('username');
        /*if (username == "null" || username == "undefined") {
          window.location.href = '/';
        }*/
        window.alert("I progressi effettuati non sono collegati ad un server e saranno disponibili finchè la sessione di gioco rimane aperta; per salvare (nella memoria locale del dispositivo) andare su: Menù > Gestione Dati > Salva sul PC. Accetti queste condizioni e Continuare?");
        setArrayTeE();
        window.location.href = '/game/home.html';
      } else {
        window.alert("Il tuo Username è troppo lungo; deve essere massimo 14 lettere.");
      }
    } else {
      window.location.href = '/';
    }
  }
</script>